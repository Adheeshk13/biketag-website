var b=Object.defineProperty,w=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&y(e,r,t[r]);if(c)for(var r of c(t))V.call(t,r)&&y(e,r,t[r]);return e},u=(e,t)=>w(e,v(t));import{d as _,m as B,k as U,r as n,o as s,c as l,y as F,w as P,e as I,a as o,b as i,F as p,I as h,z as N,J as A,t as D}from"./vendor.4a4888af.js";import{B as T,L as j,_ as R}from"./SpinningBikeV1.ce2a643d.js";import{P as S}from"./PlayerBicon.2826188d.js";import{_ as M}from"./index.b2c36498.js";const z=_({name:"PlayerView",components:{BikeTag:T,Loading:j,Player:S},data(){var e,t;return console.log(this.$route.params),{currentPage:((e=this.$route.params)==null?void 0:e.currentPage.length)?parseInt((t=this.$route.params)==null?void 0:t.currentPage):1,perPage:10,tagsAreLoading:!0,tagsLoaded:[]}},computed:u(g({},B(["getPlayers"])),{player(){const t=this.getPlayers.filter(r=>{const d=this.playerName();return decodeURIComponent(encodeURIComponent(r.name))==d})[0];return console.log({player:t}),t},tagsForList(){var t;const e=(t=this.player)==null?void 0:t.tags;return e?e.reverse().slice((this.currentPage-1)*this.perPage,this.currentPage*this.perPage):[]},totalCount(){var e,t;return(t=(e=this.player)==null?void 0:e.tags)==null?void 0:t.length}}),watch:{"$route.params.currentPage":function(e){this.currentPage=Number(e)}},created(){this.startLoading()},async mounted(){await this.$store.dispatch("setTags"),await this.$store.dispatch("setPlayers")},methods:{resetCurrentPage(){this.startLoading(),this.currentPage=1},playerName(){return decodeURIComponent(encodeURIComponent(this.$route.params.name))},getSelfTagFoundDescription(e){return U.getters.getImgurFoundDescriptionFromBikeTagData(u(g({},e),{tagnumber:e.tagnumber-1}))},changePage(e,t){this.startLoading(),this.$router.push("/player/"+encodeURIComponent(this.playerName())+"/"+t)},startLoading(){this.tagsLoaded=[],this.tagsAreLoading=!0,setTimeout(()=>{this.tagsAreLoading=!1},2e3)},tagLoaded(){}}}),E=o("img",{class:"spinner",src:R},null,-1),G={class:"container"},J={class:"d-flex justify-content-center"},q={class:"row"},H={id:"itemList",class:"player-tags list-unstyled"},K=["value"];function O(e,t,r,d,Q,W){const f=n("loading"),L=n("player",!0),m=n("b-pagination"),C=n("bike-tag"),k=n("b-form-group");return s(),l(p,null,[e.tagsAreLoading?(s(),F(f,{key:0,active:e.tagsAreLoading,"onUpdate:active":t[0]||(t[0]=a=>e.tagsAreLoading=a),"is-full-page":!0},{default:P(()=>[E]),_:1},8,["active"])):I("",!0),o("div",G,[o("div",J,[i(L,{size:"lg",player:e.player,"no-link":!0},null,8,["player"])]),o("div",q,[i(m,{modelValue:e.currentPage,"onUpdate:modelValue":t[1]||(t[1]=a=>e.currentPage=a),"total-rows":e.totalCount,"per-page":e.perPage,"aria-controls":"itemList",align:"center",onPageClick:e.changePage},null,8,["modelValue","total-rows","per-page","onPageClick"]),o("ul",H,[(s(!0),l(p,null,h(e.tagsForList,a=>(s(),l("li",{key:a.tagnumber},[i(C,{key:a.tagnumber,tag:a,"found-player":" ","mystery-player":" ","found-tagnumber":a.tagnumber-1,"found-description":e.getSelfTagFoundDescription(a)},null,8,["tag","found-tagnumber","found-description"])]))),128))]),i(k,null,{default:P(()=>[N(o("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.perPage=a),class:"form-select w-25 m-auto",onChange:t[3]||(t[3]=(...a)=>e.resetCurrentPage&&e.resetCurrentPage(...a))},[(s(),l(p,null,h(3,a=>o("option",{key:Math.pow(10,a),value:Math.pow(10,a)},D(Math.pow(10,a)),9,K)),64))],544),[[A,e.perPage]])]),_:1}),i(m,{modelValue:e.currentPage,"onUpdate:modelValue":t[4]||(t[4]=a=>e.currentPage=a),"total-rows":e.totalCount,"per-page":e.perPage,"aria-controls":"itemList",align:"center",onPageClick:e.changePage},null,8,["modelValue","total-rows","per-page","onPageClick"])])])],64)}var te=M(z,[["render",O]]);export{te as default};
