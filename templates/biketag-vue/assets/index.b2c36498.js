var W=Object.defineProperty,Q=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var w=(o,e,r)=>e in o?W(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,v=(o,e)=>{for(var r in e||(e={}))Y.call(e,r)&&w(o,r,e[r]);if(I)for(var r of I(e))K.call(e,r)&&w(o,r,e[r]);return o},R=(o,e)=>Q(o,x(e));import{d as k,m as L,r as h,o as p,c as _,a as u,b as l,w as f,e as P,t as U,F as C,p as S,f as A,g as m,h as B,v as X,n as z,i as J,j as Z,k as q,l as ee,q as oe,s as re,X as ne,V as te,u as se}from"./vendor.4a4888af.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}};ie();var E=(o,e)=>{const r=o.__vccOpts||o;for(const[s,t]of e)r[s]=t;return r};const ue=k({name:"BikeTagHeader",computed:v({isShow(){return this.$route.name!=="Play"}},L(["getGameTitle","getLogoUrl","getCurrentBikeTag"])),async mounted(){await this.$store.dispatch("setGame"),await this.$store.dispatch("setTags"),await this.$store.dispatch("setCurrentBikeTag"),await this.$store.dispatch("setPlayers")},methods:{goBikeDexPage:function(){this.$router.push("/bikedex")},goQueuePage:function(){this.$router.push("/queue")},goHowPage:function(){this.$router.push("/how")},goBack:function(){this.$router.push("/")}}}),ae=o=>(S("data-v-62145f8e"),o=o(),A(),o),ce={class:"container align-self-center"},le={key:0,class:"menu-btn p-2"},ge=ae(()=>u("i",{class:"fa fa-long-arrow-alt-left"},null,-1)),me={class:"container mb-5"},pe={class:"header-logo"},_e={href:"./"},fe=["src"],de={class:"game-title"},he=m("BikeDex"),ye=m(" PLAY( "),Te=m(" ) "),ve=m("How-To");function ke(o,e,r,s,t,i){const n=h("b-button");return p(),_(C,null,[u("div",ce,[o.isShow?(p(),_("div",le,[l(n,{class:"btn-circle",variant:"primary",onClick:o.goBack},{default:f(()=>[ge]),_:1},8,["onClick"])])):P("",!0)]),u("div",me,[u("div",pe,[u("a",_e,[u("img",{src:o.getLogoUrl("h=256&w=256"),class:"logo img-fluid"},null,8,fe)]),u("div",null,[u("span",de,U(o.getGameTitle),1)])]),u("div",null,[l(n,{class:"m-1",variant:"primary",onClick:o.goBikeDexPage},{default:f(()=>[he]),_:1},8,["onClick"]),l(n,{class:"m-1",variant:"primary",onClick:o.goQueuePage},{default:f(()=>[ye,u("span",null,U(o.getCurrentBikeTag.tagnumber),1),Te]),_:1},8,["onClick"]),l(n,{class:"m-1",variant:"primary",onClick:o.goHowPage},{default:f(()=>[ve]),_:1},8,["onClick"])])])],64)}var Ee=E(ue,[["render",ke],["__scopeId","data-v-62145f8e"]]);const Pe=k({name:"BikeTagFooter",methods:{goAboutPage:function(){this.$router.push("/about")},goSupportPage:function(){this.$router.push("/support")},goLeaderboardPage:function(){this.$router.push("/leaderboard")},goUsersPage:function(){this.$router.push("/players")}}}),O=o=>(S("data-v-737e0d92"),o=o(),A(),o),be={class:"container"},$e=m("Leaderboard"),Ie=m("Players"),we=O(()=>u("div",{class:"back-to-home"},[u("a",{href:"https://biketag.org"},[u("i",{class:"fa fa-globe","aria-hidden":"true"}),u("h5",null,"worldwide")])],-1)),Re=m("About"),Le=m("Support"),Ue=O(()=>u("footer",{class:"footer container my-5"},[u("section",null,[u("p",{class:"copyright"},[m(" BikeTag is an open source website "),u("a",{href:"https://github.com/KenEucker/biketag-website"},"developed on github")])])],-1));function Ce(o,e,r,s,t,i){const n=h("b-button");return p(),_("div",be,[u("div",null,[l(n,{class:"m-1",onClick:o.goLeaderboardPage},{default:f(()=>[$e]),_:1},8,["onClick"]),l(n,{class:"m-1",onClick:o.goUsersPage},{default:f(()=>[Ie]),_:1},8,["onClick"])]),we,u("div",null,[l(n,{class:"m-1",variant:"primary",onClick:o.goAboutPage},{default:f(()=>[Re]),_:1},8,["onClick"]),l(n,{class:"m-1",variant:"primary",onClick:o.goSupportPage},{default:f(()=>[Le]),_:1},8,["onClick"])]),Ue])}var Se=E(Pe,[["render",Ce],["__scopeId","data-v-737e0d92"]]);function Ae(o={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:t,onRegisterError:i}=o;let n,a;const d=async(c=!0)=>{c&&(n==null||n.addEventListener("controlling",M=>{M.isUpdate&&window.location.reload()})),a&&a.waiting&&await z(a.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){n=new X("/worker.js",{scope:"/"}),n.addEventListener("activated",c=>{c.isUpdate||s==null||s()});{const c=()=>{r==null||r()};n.addEventListener("waiting",c),n.addEventListener("externalwaiting",c)}n.register({immediate:e}).then(c=>{a=c,t==null||t(c)}).catch(c=>{i==null||i(c)})}return d}function Be(o={}){const{immediate:e=!0,onNeedRefresh:r,onOfflineReady:s,onRegistered:t,onRegisterError:i}=o,n=B(!1),a=B(!1);return{updateServiceWorker:Ae({immediate:e,onNeedRefresh(){n.value=!0,r==null||r()},onOfflineReady(){a.value=!0,s==null||s()},onRegistered:t,onRegisterError:i}),offlineReady:a,needRefresh:n}}const{offlineReady:D,needRefresh:G,updateServiceWorker:qe}=Be(),Oe=k({name:"ServiceWorker",props:{filename:{type:String,default:""}},data(){return{offlineReady:D,needRefresh:G,updateServiceWorker:qe}},computed:v({},L(["getGameSlug","getGameTitle","getLogoUrl"])),async created(){await this.$store.dispatch("setGame");const o=document.querySelector('link[rel="manifest"]');if(o){const e=await fetch(o.href),r=R(v({},await e.json()),{name:this.getGameTitle,id:this.getGameSlug,icons:[{src:await this.getLogoUrl("h=192&w=192"),sizes:"192x192",type:"image/png"},{src:await this.getLogoUrl("h=512&w=512"),sizes:"512x512",type:"image/png"}]}),s=new Blob([JSON.stringify(r)],{type:"application/json"});o.setAttribute("href",URL.createObjectURL(s)),console.log("dynamic application manifest",r)}},methods:{close:async()=>{D.value=!1,G.value=!1}}}),De={key:0,class:"pwa-toast",role:"alert"},Ge={class:"message"},Ne={key:0},je={key:1};function Fe(o,e,r,s,t,i){return o.offlineReady||o.needRefresh?(p(),_("div",De,[u("div",Ge,[o.offlineReady?(p(),_("span",Ne," App ready to work offline ")):(p(),_("span",je," New content available, click on reload button to update. "))]),o.needRefresh?(p(),_("button",{key:0,onClick:e[0]||(e[0]=n=>o.updateServiceWorker())},"Reload")):P("",!0),u("button",{onClick:e[1]||(e[1]=(...n)=>o.close&&o.close(...n))},"Close")])):P("",!0)}var Ve=E(Oe,[["render",Fe]]);const He=k({name:"App",components:{BikeTagHeader:Ee,BikeTagFooter:Se,ServiceWorker:Ve},async mounted(){await this.$store.dispatch("setGame")}});function Me(o,e,r,s,t,i){const n=h("service-worker"),a=h("bike-tag-header"),d=h("router-view"),c=h("bike-tag-footer");return p(),_(C,null,[l(n),l(a),l(d),l(c)],64)}var We=E(He,[["render",Me]]);const Qe="modulepreload",N={},xe="/",g=function(e,r){return!r||r.length===0?e():Promise.all(r.map(s=>{if(s=`${xe}${s}`,s in N)return;N[s]=!0;const t=s.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const n=document.createElement("link");if(n.rel=t?"stylesheet":Qe,t||(n.as="script",n.crossOrigin=""),n.href=s,document.head.appendChild(n),t)return new Promise((a,d)=>{n.addEventListener("load",a),n.addEventListener("error",d)})})).then(()=>e())},Ye=[{path:"/:tagnumber?",name:"Play",component:()=>g(()=>import("./Play.165d7f37.js"),["assets/Play.165d7f37.js","assets/Play.0a6c16e3.css","assets/vendor.4a4888af.js","assets/SpinningBikeV1.ce2a643d.js","assets/SpinningBikeV1.c53c5a69.css","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/bikedex/:currentPage?",name:"BikeDex",component:()=>g(()=>import("./BikeDex.fd286379.js"),["assets/BikeDex.fd286379.js","assets/vendor.4a4888af.js","assets/SpinningBikeV1.ce2a643d.js","assets/SpinningBikeV1.c53c5a69.css","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/players/:currentPage?",name:"Players",component:()=>g(()=>import("./Players.9e63d02a.js"),["assets/Players.9e63d02a.js","assets/vendor.4a4888af.js","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/player/:name/:currentPage?",name:"Player",component:()=>g(()=>import("./Player.b604ff1f.js"),["assets/Player.b604ff1f.js","assets/vendor.4a4888af.js","assets/SpinningBikeV1.ce2a643d.js","assets/SpinningBikeV1.c53c5a69.css","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/queue",name:"Queue",component:()=>g(()=>import("./QueueBikeTag.54cf8865.js"),["assets/QueueBikeTag.54cf8865.js","assets/QueueBikeTag.7aa3e6ec.css","assets/vendor.4a4888af.js"])},{path:"/how",name:"How",component:()=>g(()=>import("./HowTo.e52f993e.js"),["assets/HowTo.e52f993e.js","assets/HowTo.0e6f210d.css","assets/vendor.4a4888af.js"])},{path:"/leaderboard",name:"LeaderBoard",component:()=>g(()=>import("./Leaderboard.52eaca27.js"),["assets/Leaderboard.52eaca27.js","assets/vendor.4a4888af.js","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/about",name:"About",component:()=>g(()=>import("./HtmlContent.72199c33.js"),["assets/HtmlContent.72199c33.js","assets/vendor.4a4888af.js"])},{path:"/support",name:"support",component:()=>g(()=>import("./HtmlContent.72199c33.js"),["assets/HtmlContent.72199c33.js","assets/vendor.4a4888af.js"])},{path:"/players/:currentPage?",name:"Players",component:()=>g(()=>import("./Players.9e63d02a.js"),["assets/Players.9e63d02a.js","assets/vendor.4a4888af.js","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])},{path:"/player/:name/:currentPage?",name:"Player",component:()=>g(()=>import("./Player.b604ff1f.js"),["assets/Player.b604ff1f.js","assets/vendor.4a4888af.js","assets/SpinningBikeV1.ce2a643d.js","assets/SpinningBikeV1.c53c5a69.css","assets/PlayerBicon.2826188d.js","assets/PlayerBicon.65990c41.css"])}],Ke=J({history:Z(),routes:Ye,scrollBehavior(o,e,r){return{top:0}}}),Xe=(o,e)=>{const r=["biketag.dev","biketag.dev","0.0.0.0","localhost"];let s=(o?o.headers.host:e?e.location.host:"").toLowerCase().replace(/www./g,""),t=null,i;s.indexOf(":")>0&&([s,t]=s.split(":"));const n=r.indexOf(s)===-1;if(n){const a=s.split(".");i=a[0],s=a.join(".")}return{host:s+(t?":"+t:""),isSubdomain:n,subdomain:i}},b=Xe(void 0,window);var F;const $=(F=b.subdomain)!=null?F:"portland",ze="4fa12c6ce36984b",T={game:$,sanity:{projectId:"x37ikhvs",dataset:"production"}},Je="/images/BikeTag.svg";var V,H;const Ze=`https://cdn.sanity.io/images/${(V=T.sanity)==null?void 0:V.projectId}/${(H=T.sanity)==null?void 0:H.dataset}/`;console.log("store::init",{subdomain:b.subdomain,domain:b,gameName:$});let y=new q(T);const eo=ee({state:{gameName:$,game:{},currentBikeTag:{},tags:[],players:[],html:"",formStep:1,queuedTag:{}},getters:{getGame(o){return o.game},getGameSlug(o){var e;return(e=o.game)==null?void 0:e.slug},getGameTitle(o){return`${o.gameName.toUpperCase()}.BIKETAG`},getLogoUrl:o=>(e="")=>{var s,t;const r=((t=(s=o.game)==null?void 0:s.logo)==null?void 0:t.indexOf("imgur.com"))!==-1?o.game.logo:`${Ze}${o.game.logo.replace("image-","").replace("-png",".png").replace("-jpg",".jpg")}${e.length?`?${e}`:""}`;return r||Promise.resolve(Je)},getCurrentHint(o){var e;return(e=o.currentBikeTag)==null?void 0:e.hint},getCurrentBikeTag(o){return o.currentBikeTag},getTags(o){return o.tags},getPlayers(o){return o.players},getFormStep(o){return o.formStep},getQueuedTag(o){return o.queuedTag}},mutations:{SET_GAME(o,e){const r=o.game;o.game=e,(r==null?void 0:r.name)!==(e==null?void 0:e.name)&&console.log("store::game",{game:e})},SET_CURRENT_TAG(o,e){const r=o.currentBikeTag;o.currentBikeTag=e,(r==null?void 0:r.tagnumber)!==(e==null?void 0:e.tagnumber)&&console.log("store::currentBikeTag",{tag:e})},SET_TAGS(o,e){const r=o.tags;o.tags=e,(r==null?void 0:r.length)!==(e==null?void 0:e.length)&&console.log("store::tags",{tags:e})},SET_HTML(o,e){const r=o.html;o.html=e,(r==null?void 0:r.length)!==(e==null?void 0:e.length)&&console.log("store::html",{html:e})},SET_PLAYERS(o,e){const r=o.players;o.players=e,(r==null?void 0:r.length)!==(e==null?void 0:e.length)&&console.log("store::players",{players:e})},SET_QUEUE_FOUND(o,e){const r=o.queuedTag;o.queuedTag.foundImageUrl=e.foundImageUrl,o.queuedTag.foundImage=e.foundImage,o.queuedTag.foundLocation=e.foundLocation,o.queuedTag.foundPlayer=e.foundPlayer,((r==null?void 0:r.foundImageUrl)!==(e==null?void 0:e.foundImageUrl)||(r==null?void 0:r.foundImage)!==(e==null?void 0:e.foundImage)||(r==null?void 0:r.foundLocation)!==(e==null?void 0:e.foundImageUrl)||(r==null?void 0:r.foundPlayer)!==(e==null?void 0:e.foundPlayer))&&console.log("store::queuedTag",o.queuedTag)},SET_QUEUE_MYSTERY(o,e){const r=o.queuedTag;o.queuedTag.mysteryImageUrl=e.mysteryImageUrl,o.queuedTag.mysteryImage=e.mysteryImage,o.queuedTag.hint=e.hint,o.queuedTag.mysteryPlayer=o.queuedTag.foundPlayer,((r==null?void 0:r.mysteryImageUrl)!==(e==null?void 0:e.mysteryImageUrl)||(r==null?void 0:r.mysteryImage)!==(e==null?void 0:e.mysteryImage)||(r==null?void 0:r.hint)!==(e==null?void 0:e.hint)||(r==null?void 0:r.mysteryPlayer)!==(e==null?void 0:e.mysteryPlayer))&&console.log("store::queuedTag",o.queuedTag)},SET_QUEUED_TAG(o,e){const r=o.queuedTag;o.queuedTag.mysteryImageUrl=e.mysteryImageUrl,o.queuedTag.mysteryImage=e.mysteryImage,o.queuedTag.hint=e.hint,o.queuedTag.mysteryPlayer=o.queuedTag.foundPlayer,o.queuedTag.foundImageUrl=e.foundImageUrl,o.queuedTag.foundImage=e.foundImage,o.queuedTag.foundLocation=e.foundLocation,o.queuedTag.foundPlayer=e.foundPlayer,((r==null?void 0:r.mysteryImageUrl)!==(e==null?void 0:e.mysteryImageUrl)||(r==null?void 0:r.mysteryImage)!==(e==null?void 0:e.mysteryImage)||(r==null?void 0:r.hint)!==(e==null?void 0:e.hint)||(r==null?void 0:r.mysteryPlayer)!==(e==null?void 0:e.mysteryPlayer)||(r==null?void 0:r.foundImageUrl)!==(e==null?void 0:e.foundImageUrl)||(r==null?void 0:r.foundImage)!==(e==null?void 0:e.foundImage)||(r==null?void 0:r.foundLocation)!==(e==null?void 0:e.foundImageUrl)||(r==null?void 0:r.foundPlayer)!==(e==null?void 0:e.foundPlayer))&&console.log("store::queuedTag",o.queuedTag)},RESET_FORM_STEP(o){o.formStep=1},INC_FORM_STEP(o){o.formStep++},DEC_FORM_STEP(o){o.formStep++}},actions:{setGame({commit:o,state:e}){return y.game(e.gameName).then(r=>(T.imgur={clientId:ze,hash:r.mainhash},y=new q(T),o("SET_GAME",r)))},setCurrentBikeTag({commit:o}){return y.getTag().then(e=>o("SET_CURRENT_TAG",e.data))},setTags({commit:o}){return y.tags().then(e=>o("SET_TAGS",e))},setPlayers({commit:o}){return y.players().then(e=>o("SET_PLAYERS",e))},setTopPlayers({commit:o}){return y.players({sort:"top"}).then(e=>o("SET_PLAYERS",e))},setQueueFound({commit:o},e){return o("SET_QUEUE_FOUND",e)},setQueuedTag({commit:o},e){return o("SET_QUEUED_TAG",e)},setQueueMystery({commit:o},e){return o("SET_QUEUE_MYSTERY",e)},incFormStep({commit:o}){return o("INC_FORM_STEP")},decFormStep({commit:o}){return o("DEC_FORM_STEP")},resetFormStep({commit:o}){return o("RESET_FORM_STEP")},setHtml({commit:o},e){return oe.get("./"+e).then(r=>o("SET_HTML",r.data))}},modules:{}});const oo=se(),j=re(We);j.config.globalProperties.emitter=oo;j.use(Ke).use(eo).use(ne).use(te).mount("#app");export{E as _};
