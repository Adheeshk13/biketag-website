var b=Object.defineProperty,V=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var P=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))B.call(t,r)&&P(e,r,t[r]);if(m)for(var r of m(t))A.call(t,r)&&P(e,r,t[r]);return e},h=(e,t)=>V(e,$(t));import{d as T,m as U,r as n,x as D,o as s,c as i,a as o,b as l,F as u,I as y,z as L,w as f,J as j,t as I,y as M,e as N}from"./vendor.4a4888af.js";import{B as S,L as F,_ as R}from"./SpinningBikeV1.ce2a643d.js";import{_ as z}from"./index.b2c36498.js";import"./PlayerBicon.2826188d.js";const E=T({name:"BikeDexView",components:{BikeTag:S,Loading:F},data(){var e,t;return console.log(this.$route.params),{currentPage:((e=this.$route.params)==null?void 0:e.currentPage.length)?parseInt((t=this.$route.params)==null?void 0:t.currentPage):1,perPage:10,tagsAreLoading:!0,tagsLoaded:[]}},computed:h(c({},U(["getTags","getPlayers"])),{tagsList(){return this.getTags.slice((this.currentPage-1)*this.perPage+(this.currentPage===1?1:0),this.currentPage*this.perPage)},totalCount(){return this.getTags.length}}),watch:{"$route.params.currentPage":function(e){this.currentPage=Number(e)}},async mounted(){await this.$store.dispatch("setTags"),await this.$store.dispatch("setPlayers")},created(){this.startLoading()},methods:{resetCurrentPage(){this.startLoading(),this.currentPage=1},changePage(e,t){this.startLoading(),this.$router.push("/bikedex/"+t)},startLoading(){this.tagsLoaded=[],this.tagsAreLoading=!0,setTimeout(()=>{this.tagsAreLoading=!1},2e3)},getPlayer(e){var r,g;return((g=(r=this.getPlayers)==null?void 0:r.filter(d=>decodeURIComponent(encodeURIComponent(d.name))==e))!=null?g:[])[0]},tagLoaded(){}}}),G={class:"container"},J=["value"],_=o("img",{class:"spinner",src:R},null,-1);function q(e,t,r,g,d,H){const p=n("b-pagination"),v=n("bike-tag"),k=n("b-form-group"),C=n("loading"),w=D("masonry-tile");return s(),i(u,null,[o("div",G,[l(p,{modelValue:e.currentPage,"onUpdate:modelValue":t[0]||(t[0]=a=>e.currentPage=a),"total-rows":e.totalCount,"per-page":e.perPage,"aria-controls":"itemList",align:"center",onPageClick:e.changePage},null,8,["modelValue","total-rows","per-page","onPageClick"]),o("div",null,[(s(!0),i(u,null,y(e.tagsList,a=>L((s(),i("div",{key:a.tagnumber,class:"item"},[l(v,{key:a.tagnumber,tag:a,reverse:!0,"found-player":e.getPlayer(a.foundPlayer),"mystery-player":e.getPlayer(a.mysteryPlayer),onLoad:t[1]||(t[1]=K=>e.tagLoaded(e.tagsList.tagnumber))},null,8,["tag","found-player","mystery-player"])],512)),[[w]])),128))]),l(k,null,{default:f(()=>[L(o("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.perPage=a),class:"form-select w-25 m-auto",onChange:t[3]||(t[3]=(...a)=>e.resetCurrentPage&&e.resetCurrentPage(...a))},[(s(),i(u,null,y(3,a=>o("option",{key:Math.pow(10,a),value:Math.pow(10,a)},I(Math.pow(10,a)),9,J)),64))],544),[[j,e.perPage]])]),_:1}),l(p,{modelValue:e.currentPage,"onUpdate:modelValue":t[4]||(t[4]=a=>e.currentPage=a),"total-rows":e.totalCount,"per-page":e.perPage,"aria-controls":"itemList",align:"center",onPageClick:e.changePage},null,8,["modelValue","total-rows","per-page","onPageClick"])]),e.tagsAreLoading?(s(),M(C,{key:0,active:e.tagsAreLoading,"onUpdate:active":t[5]||(t[5]=a=>e.tagsAreLoading=a),"is-full-page":!0},{default:f(()=>[_]),_:1},8,["active"])):N("",!0)],64)}var Z=z(E,[["render",q]]);export{Z as default};
